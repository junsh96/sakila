<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<style>
	body {
    padding: 0;
    margin: 0;
    width: 100%;
    height: 100%;
    overflow: hidden;
    background-position: 0 0;
    background-repeat: no-repeat;
    background-attachment: fixed;
    background-size: cover;
    position: relative;
    overflow-y: auto;
}

	#aside{
		width:200px;
		height:3000px;
		position:fixed;
		background:orange;
		overflow:hidden;
		float:left;
	}

	#section{
		margin-left:300px;
		margin-right:1000px;
		margin-bottom:100px;
		background:white;
	}
</style>
<body>
	<div id = "aside">
		
	</div>
	
	<div id = "section">
		<h1>Address관리</h1>
			<h2>address 입력</h2>
			<div>
				<!-- country list 출력 -->
				<table border = "1">
					<tr>
						<td>
						Country
							<div>
								<select size ="10" id = "countryList">
								
								</select>
							</div>
						</td>
						<td>
						City
							<!-- city list 출력 -->
							<div>
								<select size = "10" id= "cityList">
								
								</select>
							</div>
						</td>
							<!-- address add -->
					</tr>
						<fieldset>
							<div>address: <input type = "text"></div>
							<div>address2: <input type = "text"></div>
							<div>district: <input type = "text"></div>
							<div>cityId: <input type = "text" id = "cityId" readonly="readonly"></div>
							<div>postalCode: <input type = "text"></div>
							<div>phone: <input type = "text"></div>
						</fieldset>
				</table>
				<button id = "add">addressAdd</button>
			</div>
		<h2>addressList</h2>
		<table border = "1">
			<thead>
				<tr>addressId</tr>
				<tr>address</tr>
				<tr>address2</tr>
				<tr>district</tr>
				<tr>postalCode</tr>
				<tr>phone</tr>
				<tr>lastUpdate</tr>
			</thead>
			<tbody id = "addressList">
				
			</tbody>
		</table>
	</div>
</body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

<script>
	$("#aside").load("/sakila/aside.html");
	
	$.ajax({
		url:"/sakila/selectCountryListAll",
		method:"POST",
		success:function(json){
			$("#countryList").empty();
			$(json).each(function(index, item){
				temp = "<option value ='";
				temp += item.countryId;
				temp += "'>";
				temp += item.country;
				temp += "</option>";
				$("#countryList").append(temp);
			});
		}
	});
	
	$("#countryList").change(function(){
		$.ajax({
			url:"/sakila/selectCityListByCountry",
			method:"POST",
			data:{"countryId":$("#countryList").val()},
			success:function(json){
				$("#cityList").empty();
				$(json).each(function(index, item){
					temp = "<option value = '";
					temp += item.cityId;
					temp += "'>";
					temp += item.city;
					temp += "</option>";
					$("#cityList").append(temp);
				});
			}
		});
	});
	$("#cityList").change(function(){
		$("#cityId").val($("#cityList").val());
	});
	
	$.ajax({
		url:"/sakila/selectAddressList",
		method:"POST",
		success:function(json){
			
			$("#addressList").empty();
			$(json).each(function(index, item){
				temp = "<tr><td>";
				temp += item.addressId;
				temp += "</td><td>";
				temp += item.address;
				temp += "</td><td>";
				temp += item.address2;
				temp += "</td><td>";
				temp += item.district;
				temp += "</td><td>";
				temp += item.postalCode;
				temp += "</td><td>";
				temp += item.phone;
				temp += "</td><td>";
				temp += item.lastUpdate;
				temp += "</td></tr>";
				$("#addressList").append(temp);
			});
		}
	});
</script>
</html>